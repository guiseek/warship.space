var b=Object.defineProperty;var R=(n,t,e)=>t in n?b(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var r=(n,t,e)=>(R(n,typeof t!="symbol"?t+"":t,e),e);const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}};I();const O=100,E=.2,T=.06,K=12;class A{constructor(t,e,s,i,o){r(this,"velocity");r(this,"position");r(this,"width");r(this,"height");r(this,"decay");r(this,"dead");this.x=t,this.y=e,this.vx=s,this.vy=i,this.size=o,this.velocity={x:s,y:i},this.position={x:t,y:e},this.size=o,this.width=o,this.height=o,this.decay=T,this.dead=!1}updateSize(){this.size-=this.decay,this.size<=0&&(this.dead=!0)}updatePosition(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}draw(t){t.fillStyle="#eaeaea",t.fillRect(this.position.x-this.size/2,this.position.y-this.size/2,this.size,this.size)}}function N(n,t,e){return{x:n.x-Math.cos(t)*e,y:n.y-Math.sin(t)*e}}class q{constructor(t,e,s){r(this,"power",E);r(this,"brake",-E);r(this,"velocity",{x:0,y:0});r(this,"position");r(this,"width");r(this,"height");r(this,"rotation",0);r(this,"canvasSize");r(this,"center");r(this,"ctx");r(this,"canvas");this.x=t,this.y=e,this.size=s,this.position={x:t,y:e},this.size=s,this.width=s,this.height=s,this.canvasSize=this.size*2,this.center=this.canvasSize/2,this.ctx=this.createCanvasContext(),this.canvas=this.ctx.canvas,this.canvas.width=this.canvasSize,this.canvas.height=this.canvasSize,this.draw()}createCanvasContext(){return document.createElement("canvas").getContext("2d")}accelerate(){const t=Math.PI/2;this.velocity=N(this.velocity,this.rotation/180*Math.PI+t,this.power)}decelerate(){const t=Math.PI/2;this.velocity=N(this.velocity,this.rotation/180*Math.PI+t,this.brake)}updatePosition(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}rotateCounterClockwise(){this.rotation<=0?this.rotation=360:this.rotation-=5}rotateClockwise(){this.rotation>=360?this.rotation=0:this.rotation+=5}drawShip(){const t=this.center/2;this.ctx.strokeStyle="white",this.ctx.lineWidth=this.size/6,this.ctx.beginPath(),this.ctx.moveTo(this.size/2-t,-t*1.7),this.ctx.lineTo(this.size-t,this.size-t),this.ctx.lineTo(0-t,this.size-t),this.ctx.closePath(),this.ctx.stroke()}draw(){this.ctx.fillStyle="rgba(255, 0, 0, 0.5)",this.ctx.clearRect(0,0,this.canvasSize,this.canvasSize),this.ctx.save(),this.ctx.translate(this.center,this.center),this.ctx.rotate(this.rotation/180*Math.PI),this.drawShip(),this.ctx.restore()}}class D{constructor(t,e){r(this,"dpr",window.devicePixelRatio||1);r(this,"ctx");r(this,"particles",[]);r(this,"rocket");r(this,"timer",-1);r(this,"keys",{space:!0,down:!0,right:!0,up:!0,left:!0});r(this,"demo1",!1);r(this,"demo2",!1);this.canvas=t,this.control=e,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.dpr,this.dpr),this.setCanvasSize=this.setCanvasSize.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.handleKeyup=this.handleKeyup.bind(this),this.loop=this.loop.bind(this),this.setCanvasSize(),this.setupListeners(),this.setupKeys(),this.particles=[],this.rocket=new q(this.canvas.width/2,this.canvas.height/2,O),this.loop()}demo(){this.demo1=!0,this.demo2=!1,this.control.up.className="key up is-down",this.control.right.className="key right is-down",this.timer=setTimeout(()=>{this.demo1=!1,this.demo2=!0,this.control.right.className="key right",this.control.left.className="key left is-down",this.timer=setTimeout(()=>{this.demo2=!1,this.control.up.className="key up",this.control.left.className="key left"},1e3)},1300)}setCanvasSize(){this.canvas.width=window.innerWidth*this.dpr,this.canvas.height=window.innerHeight*this.dpr,this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px"}setupListeners(){window.addEventListener("resize",this.setCanvasSize),window.addEventListener("keydown",this.handleKeydown),window.addEventListener("keyup",this.handleKeyup),this.control.up.onmousedown=()=>this.keys.up=!0,this.control.down.onmousedown=()=>this.keys.down=!0,this.control.left.onmousedown=()=>this.keys.left=!0,this.control.right.onmousedown=()=>this.keys.right=!0,this.control.up.onmouseup=()=>this.keys.up=!1,this.control.down.onmouseup=()=>this.keys.down=!1,this.control.left.onmouseup=()=>this.keys.left=!1,this.control.right.onmouseup=()=>this.keys.right=!1}setupKeys(){this.keys={space:!1,up:!1,down:!1,right:!1,left:!1}}handleKeydown(t){switch(t.key){case" ":this.keys.space=!0;break;case"ArrowDown":this.keys.down=!0;break;case"ArrowRight":this.keys.right=!0;break;case"ArrowUp":this.keys.up=!0;break;case"ArrowLeft":this.keys.left=!0;break}}handleKeyup(t){switch(this.control.left.className="key left",this.control.right.className="key right",this.control.up.className="key up",this.control.down.className="key down",t.key){case" ":this.keys.space=!1;break;case"ArrowDown":this.keys.down=!1;break;case"ArrowRight":this.keys.right=!1;break;case"ArrowUp":this.keys.up=!1;break;case"ArrowLeft":this.keys.left=!1;break}}updateRocket(){this.keys.right&&(this.control.right.className="key right is-down",this.rocket.rotateClockwise()),this.keys.left&&(this.control.left.className="key left is-down",this.rocket.rotateCounterClockwise()),this.keys.up&&(this.control.up.className="key up is-down",this.addParticles(this.rocket),this.rocket.accelerate()),this.keys.down&&(this.control.down.className="key down is-down",this.addParticles(this.rocket),this.rocket.decelerate()),this.rocket.updatePosition(),this.positionCheck(this.rocket),this.rocket.draw()}positionCheck(t){const e=t.canvasSize||this.rocket.canvasSize,{position:s}=t;s.x<-e&&(t.position.x=this.canvas.width),s.y<-e&&(t.position.y=this.canvas.height),s.x>this.canvas.width&&(t.position.x=-e),s.y>this.canvas.height&&(t.position.y=-e)}addParticles(t){let{x:e,y:s}=t.position;e=e+t.size/2,s=s+t.size/2;let{x:i,y:o}=t.velocity;i=i,o=o;const a=new A(e,s,i,o,K);this.particles.push(a)}drawParticles(){!this.particles.length||this.particles.forEach((t,e)=>{this.positionCheck(t),t.updatePosition(),t.updateSize(),t.draw(this.ctx),t.dead&&this.particles.splice(e,1)})}drawRocket(){this.ctx.drawImage(this.rocket.canvas,this.rocket.position.x,this.rocket.position.y,this.rocket.width,this.rocket.height)}drawBG(){const t=this.ctx.createLinearGradient(0,0,0,this.canvas.height);t.addColorStop(0,"#271232"),t.addColorStop(1,"#183070"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}runDemo(){this.demo1&&(this.addParticles(this.rocket),this.rocket.rotateClockwise(),this.rocket.accelerate()),this.demo2&&(this.addParticles(this.rocket),this.rocket.rotateCounterClockwise(),this.rocket.accelerate())}loop(){window.requestAnimationFrame(this.loop),this.runDemo(),this.drawBG(),this.updateRocket(),this.drawParticles(),this.drawRocket()}}class h{static query(t){return document.querySelector(t)}static captureMouse(t){var e={x:0,y:0};function s(i){e.x=i.pageX-t.offsetLeft,e.y=i.pageY-t.offsetTop}return t.addEventListener("mousemove",s),e}static captureTouch(t){var e={x:0,y:0,isPressed:!1};function s(){e.isPressed=!0}function i(){e.isPressed=!1}function o(a){e.x=a.touches[0].pageX-t.offsetLeft,e.y=a.touches[0].pageY-t.offsetTop}return t.addEventListener("touchstart",s),t.addEventListener("touchend",i),t.addEventListener("touchmove",o),e}static containsPoint(t,e,s){return!(e<t.x||e>t.x+t.width||s<t.y||s>t.y+t.height)}static intersects(t,e){return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)}static rand(t,e){return Math.random()*(e-t)+t}static randInt(t,e){return Math.floor(Math.random()*(e-t)+t)}static randMultiple(t,e){return Math.floor((Math.random()*(e-t)+t+1)/t)*t}static coinFlip(){return Math.floor(Math.random()*2)==0}static screenSize(){const{body:t,documentElement:e}=document,s=window.innerWidth||e.clientWidth||t.clientWidth,i=window.innerHeight||e.clientHeight||t.clientHeight;return{width:s,height:i}}static colorToRGB(t,e){let s=+t;typeof t=="string"&&t[0]==="#"&&(s=window.parseInt(`${t}`.slice(1),16)),e=e===void 0?1:e;var i=s>>16&255,o=s>>8&255,a=s&255,f=e<0?0:e>1?1:e;return f===1?"rgb("+i+","+o+","+a+")":"rgba("+i+","+o+","+a+","+f+")"}static convertRange(t,e,s){var i=e.max-e.min,o=s.max-s.min;return(t-e.min)*o/i+s.min}static deviceOrientationSupport(){return!!window.DeviceOrientationEvent}static touchSupport(){return"ontouchstart"in window}static allowDeviceOrientation(){return h.deviceOrientationSupport()&&h.touchSupport()}static consoleLog(t,e){document.querySelectorAll(t)[0].value=e}static displayCoordinates(t,e,s,i){function o(){h.consoleLog(".console","x: "+s.x+", y: "+s.y)}function a(){e.current?h.consoleLog(".console","x: "+e.current.x+", y: "+e.current.y):h.consoleLog(".console","x: "+e.x+", y: "+e.y)}s&&i==="touch"?t.addEventListener("touchmove",o):t.addEventListener("mousemove",a)}static setupHelpers(t,e,s,i){h.displayCoordinates(t,e,s,i)}static isPixelCollision(t,e,s,i,o,a,f){e=Math.round(e),s=Math.round(s),o=Math.round(o),a=Math.round(a);var y=t.width,S=t.height,w=i.width,C=i.height;f&&(e-=y/2+.5<<0,s-=S/2+.5<<0,o-=w/2+.5<<0,a-=C/2+.5<<0);var p=Math.max(e,o),v=Math.max(s,a),k=Math.min(e+y,o+w),m=Math.min(s+S,a+C);if(p>=k||v>=m)return!1;var L=k-p,z=m-v,M=t.data,P=i.data;if(L<4&&z<4){for(var c=p;c<k;c++)for(var d=v;d<m;d++)if(M[(c-e+(d-s)*y)*4+3]!==0&&P[(c-o+(d-a)*w)*4+3]!==0)return!0}else{var l=L/3,u=z/3;l=~~l===l?l:l+1|0,u=~~u===u?u:u+1|0;for(var g=0;g<u;g++)for(var x=0;x<l;x++)for(var d=v+g;d<m;d+=u)for(var c=p+x;c<k;c+=l)if(M[(c-e+(d-s)*y)*4+3]!==0&&P[(c-o+(d-a)*w)*4+3]!==0)return!0}return!1}}const W=h.query("canvas"),H={up:h.query("#up"),down:h.query("#down"),left:h.query("#left"),right:h.query("#right")};new D(W,H);
